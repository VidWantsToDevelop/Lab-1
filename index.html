<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Lab 1 | COMP1073 Client-Side JavaScript</title>
    </head>

    <body>
        <h1>Airports</h1>
        <ul>
            <li>Beijing Capital International, https://goo.gl/maps/iPe5fAqzq8C2 PEK</li>
            <li>John F Kennedy International, https://goo.gl/maps/JWwABmA3MBS2 JFK</li>
            <li>Lester B. Pearson International, https://goo.gl/maps/Ypu1dJLsnQu YYZ</li>
            <li>London Heathrow, https://goo.gl/maps/TFx8SrATdYr LHR</li>
            <li>Tokyo Haneda International, https://goo.gl/maps/5UxH2TxbRtT2 HND</li>
        </ul>
    </body>
    <script>
        // Get all the li tags
        var listItems = document.querySelectorAll("li");

        // Loop through the list items
        listItems.forEach((e) => {
            // Parse the string
            var str = e.textContent;

            e.textContent = ""

            console.log(str)

            var fullName = str.split(",")[0];
            var url = str.split(",")[1].split(" ")[1];
            var code = str.split(",")[1].split(" ")[2];
            
            console.log('====================================');
            console.log([fullName, url, code]);
            console.log('====================================');

            // Create a new anchor tag
            var anchor = document.createElement("a");

            // Set the href attribute
            anchor.setAttribute("href", url);

            // Concatenate string accordingly
            anchor.textContent = code + " - " + fullName;

            // BONUS task :)

            // Create a new paragraph tag
            var paragraph = document.createElement("p");
            paragraph.textContent = "Length: " + anchor.textContent.length;

            // Append both the tags to the "li" element
            e.appendChild(anchor);
            e.appendChild(paragraph);
        })
    </script>
</html>
